<div class="h-screen w-screen flex flex-col justify-center items-center bg-chess-bg p-4 relative overflow-hidden">

  <!-- Background gradient accent -->
  <div
    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120vmin] h-[120vmin] bg-radial-gradient from-white/5 to-transparent rounded-full pointer-events-none">
  </div>

  <!-- Board Wrapper with Glassmorphism shadow -->
  <div
    class="relative w-[85vmin] h-[85vmin] max-w-[800px] max-h-[800px] rounded-lg shadow-2xl bg-chess-board ring-1 ring-white/10">

    <!-- Chess Board Component -->
    <div #chessBoard class="w-full h-full rounded-lg overflow-hidden"></div>

    @if (isLoading) {
    <div
      class="absolute inset-0 bg-black/40 backdrop-blur-[2px] z-40 flex items-center justify-center rounded-lg transition-all duration-300">
      <div class="flex flex-col items-center gap-4">
        <div class="w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin"></div>
        <span class="text-white font-medium tracking-wider text-sm uppercase">LLM thinking...</span>
      </div>
    </div>
    }

    <!-- Floating Action Button (Glassmorphism) -->
    <button (click)="flipBoard()" [disabled]="isLoading" class="absolute -right-6 -bottom-6 w-14 h-14 flex items-center justify-center
             bg-white/10 backdrop-blur-md border border-white/20 rounded-full
             text-chess-text hover:text-white hover:bg-white/20 hover:scale-110 hover:border-white/40
             active:scale-95 shadow-[0_8px_32px_0_rgba(0,0,0,0.37)]
             disabled:opacity-50 disabled:cursor-not-allowed
             transition-all duration-300 ease-out z-50 group" title="Flip Board">

      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 transition-transform duration-500 group-hover:rotate-180"
        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
        <path d="M3 3v5h5" />
        <path d="M3 12a9 9 0 0 0 9 9 9.75 9 0 0 0 6.74-2.74L21 16" />
        <path d="M16 21h5v-5" />
      </svg>
    </button>

    <!-- Reset Board Button (Glassmorphism) -->
    <button (click)="resetBoard()" [disabled]="isLoading" class="absolute -left-6 -bottom-6 w-14 h-14 flex items-center justify-center
             bg-white/10 backdrop-blur-md border border-white/20 rounded-full
             text-chess-text hover:text-white hover:bg-white/20 hover:scale-110 hover:border-white/40
             active:scale-95 shadow-[0_8px_32px_0_rgba(0,0,0,0.37)]
             disabled:opacity-50 disabled:cursor-not-allowed
             transition-all duration-300 ease-out z-50 group" title="Reset Board">
      <svg xmlns="http://www.w3.org/2000/svg"
        class="w-6 h-6 transition-transform duration-500 group-hover:-translate-y-1" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
    </button>
  </div>
</div>